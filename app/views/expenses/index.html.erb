<div class ="row main_box">
<div class = "col-lg-2 col-md-2 app_panel">
  <div class="panel panel-default">
    <!-- Default panel contents -->
    <div class="panel-heading test">Filters</div>
    <div class="panel-body">
      <%= form_tag("/expenses/", method: "get") do %>
        
        <p>
          <%= label_tag(:fromdate, "From") %>
          <%= date_field(:expense, :fromdate) %></br>
        </p>
        <p>
          <%= label_tag(:todate, "To") %>
          <%= date_field(:expense, :todate) %>
        </p>
        <p>
          <%= label_tag(:project_id, "Project") %>
          <%= collection_select(:expense, :project_id, Project.all, :id, :title, :prompt => "Select a project")%>
        </p>
        <p>
          <%= label_tag(:currency_id, "Currency") %>
          <%= collection_select(:expense, :currency_id, Currency.all, :id, :title, :prompt => "Select a currency")%>
        </p>
        <p>
          <%= label_tag(:expensetype_id, "Category") %>
          <%= collection_select(:expense, :expensetype_id, Expensetype.all, :id, :title, :prompt => "Select a category")%>
        </p>
        <p>
          <%= label_tag(:user_id, "User") %>
          <%= collection_select(:expense, :user_id, User.all, :id, :name, :prompt => "Select a user")%>
        </p>
         <p>
          <%= label_tag(:expensestatus_id, "Status") %>
          <%= collection_select(:expense, :expensestatus_id, Expensestatus.all, :id, :title, :prompt => "Select a status")%>
        </p>
        <p>
          <%= label_tag(:isbillable, "Project Type") %>
          <%= select(:expense,:isbillable,options_for_select({ "All" => "-1", "Billable" => "t", "Non-Billable" => "f" }, "Select type")) %>
        </p>
        <%= submit_tag "Apply Filter", :class=> "btn btn-default"%>
        <%= link_to 'Clear', expenses_path, :class => "btn btn-default" %>
      <% end %>

    </div>
  </div>
</div>
<div class = "col-lg-10 col-md-10 app_panel">
  <div class="panel panel-default">
  <div class="panel-heading">Expenses</div>
  <div class="panel-body">
    <%= link_to 'New Expense', new_expense_path, :class => "btn btn-primary" %>
  </div>

  <table class="table sortable">
    <tr>
      <th>Number</th>  
      <th>Vendor</th>
      <th>Bill Number</th>
      <th>Bill Date</th>
      <th>Currency</th>
      <th>Amount</th>
      <th>Description</th>
      <th>Tags</th>
      <th>User</th>
      <th>Billable</th>
      <th>Project</th>
      <th>Status</th>
      <th>Category</th>
      <th colspan="3"></th>
    </tr>
   
    <% @expenses.each do |expense| %>
      <tr>
        <td><%= link_to '#', expense_path(expense) %><%= link_to expense.id, expense_path(expense) %></td>
        <td><%= expense.vendor %></td>
        <td><%= expense.billnumber %></td>
        <td><%= expense.expensedate %></td>
        <td><%= expense.amount %></td>
        <td><%= expense.currency.title %></td>
        <td><%= expense.description %></td>
        <td><%= expense.tag %></td>
        <td><%= expense.user.name %></td>
        <td><%= expense.isbillable %></td>
        <td><%= expense.project.title %></td>
        <td><%= expense.expensestatus.title %></td>
        <td><%= expense.expensetype.title %></td>
        <td>
          <% if ((expense.expensestatus==Expensestatus.first)||(current_user.is? :admin))%>
            <%= link_to 'Edit', edit_expense_path(expense) %>
          <%end%>
        </td>
        <td>
           <% if ((expense.expensestatus==Expensestatus.first)||(current_user.is? :admin))%>
              <%= link_to 'Delete', expense_path(expense),method: :delete, data: { confirm: 'Are you sure?' } %>
            <%end%>
        </td>

      </tr>
    <% end %>
  </table>
  <div class="pull-right">
    <%= will_paginate @expenses, renderer: BootstrapPagination::Rails %>
  </div>

</div>
</div>
</div>

  


